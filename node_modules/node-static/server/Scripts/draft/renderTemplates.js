function renderOffer(id) {
  var template = Handlebars.compile($('#offer-templ').html());

  $.each(offers, function (i) {
    if (offers[i].id == id) {
      $('.lightbox-wrap').html(template(offers[i]));
    }
  });

  renderTemplate('#lightbox-social-buttons-templ', '.lightbox.offer[data-id="' + id + '"] .social-actions', offers[id]);
  renderTemplate('#latest-answers-templ', '.lightbox.offer[data-id="' + id + '"] .latest-comments', offers[id]);
  renderTemplate('#lightbox-social-info-templ', '.lightbox.offer[data-id="' + id + '"] .lightbox-footer', offers[id]);
  renderInputMessage('answer');
  $('.lightbox.offer').on('click', offerActionHandler);
  $('.js-answer').on('keypress', commentingHandler);
}

function renderShortOffers() {
  var
    template,
    columns = $('.column'),
    index = 0;

  template = Handlebars.compile($('#offer-plate-templ').html());

  $.each(columns, function (i) {
    $(this).html('');
  });

  while (index < offers.length) {
    $.each(columns, function () {
      var
        $currentImg,
        $imgContainer;

      $(this).append(template(offers[index]));
      $currentImg = $(this).find('.offer-img').last();
      $imgContainer = $currentImg.parent();

      if ($currentImg.width() > 0 && $currentImg.width() < $imgContainer.width()) {
        $currentImg.addClass('small');
      }

      renderTemplate('#social-buttons-templ', '.offer-plate[data-id="' + index + '"] .social-actions', offers[index]);
      renderTemplate('#social-info-templ', '.offer-plate[data-id="' + index + '"] .social-info', offers[index]);
      renderTemplate('#latest-comments-templ', '.offer-plate[data-id="' + index + '"] .latest-comments', offers[index]);
      index += 1;

      if (index >= offers.length) return false;
    });
  }

  renderInputMessage('comment');
  $('.offer-plate').on('click', offerActionHandler);
  $('.js-comment').on('keypress', commentingHandler);
}

function renderInputMessage(subject) {
  var
    template,
    sourceSelector,
    containerSelector;

  switch (subject) {
    case 'comment':
      sourceSelector = '#add-comment-templ';
      containerSelector = '.add-comment';
      break;
    case 'answer':
      sourceSelector = '#add-answer-templ';
      containerSelector = '.add-answer';
      break;
    default:
      return false;
  }

  template = Handlebars.compile($(sourceSelector).html());
  $(containerSelector).append(template(user));
}

function renderTemplate(templateSelector, containerSelector, obj) {
  var template;

  template = Handlebars.compile($(templateSelector).html());
  $(containerSelector).html(template(obj));
};