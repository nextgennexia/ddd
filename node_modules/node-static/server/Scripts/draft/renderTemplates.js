function renderOffer(id) {
  var template = Handlebars.compile($('#offer-templ').html());

  $.each(offers, function (i) {
    if (offers[i].id == id) {
      $('.lightbox-wrap').html(template(offers[i]));
    }
  });

  renderAddMessage('answer');
  $('.lightbox.offer').on('click', offerActionHandler);
  $('.js-answer').on('keypress', commentingHandler);
}

function renderShortOffers() {
  var
    template,
    columns = $('.column'),
    index = 0;

  template = Handlebars.compile($('#offer-plate-templ').html());

  $.each(columns, function (i) {
    $(this).html('');
  });

  while (index < offers.length) {
    $.each(columns, function () {
      var
        $currentImg,
        $imgContainer;

      $(this).append(template(offers[index]));

      $currentImg = $(this).find('.offer-img').last();
      $imgContainer = $currentImg.parent();

      if ($currentImg.width() < $imgContainer.width()) {
        $currentImg.addClass('small');
      }
      index += 1;
      if (index >= offers.length) return false;
    });
  }

  renderAddMessage('comment');
  $('.offer-plate').on('click', offerActionHandler);
  $('.js-comment').on('keypress', commentingHandler);
}

function renderAddMessage(subject) {
  var
    template,
    sourceSelector,
    containerSelector;

  switch (subject) {
    case 'comment':
      sourceSelector = '#add-comment-templ';
      containerSelector = '.add-comment';
      break;
    case 'answer':
      sourceSelector = '#add-answer-templ';
      containerSelector = '.add-answer';
      break;
    default:
      return false;
  }

  template = Handlebars.compile($(sourceSelector).html());
  $(containerSelector).append(template(user));
}

function renderLoggedUser() {
  var template;

  template = Handlebars.compile($('#user-plate-templ').html());
  $('.login-wrap .author').html(template(user));
}