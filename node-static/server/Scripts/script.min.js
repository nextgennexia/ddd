function getOffers(){$.ajax({type:"GET",url:"offers.json",success:function(a){$.each(a,function(){offers.push(this)}),createOffers(offers)}})}function createOffers(a){var b,c;b=$("#offer-plate-templ").html(),c=Handlebars.compile(b);var d=$(".column"),e=[],f=0;for(jQuery.each(d,function(a){$(this).html("")});f<a.length;)jQuery.each(d,function(b){return f>=a.length?!1:(e[b]=$(this).find(".offer-plate").length,$(this).append(c(a[f])),void(f+=1))});$(".social-actions").on("click",socialActionHandler)}function offerRefresh(){$.ajax({async:!1,type:"POST",data:JSON.stringify(offers),url:"/refresh",contentType:"application/json",success:function(a){createOffers(JSON.parse(a))}})}function socialActionHandler(a){var b=$(a.target),c=$(this).parent(),d=c.attr("data-id")-1;b.hasClass("js-like")&&(offers[d].likes[0].count+=1,offerRefresh()),b.hasClass("js-offer-save")&&(offers[d].saved[0].count+=1,offerRefresh()),b.hasClass("js-view-comments")&&c.find(".latest-comments").toggleClass("hidden")}var offers=[];getOffers();